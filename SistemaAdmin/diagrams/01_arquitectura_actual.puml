@startuml Arquitectura_Actual_SIGE
!theme plain
title Sistema Integral de Gestión Educativa - Arquitectura Actual

package "Capa de Presentación" {
    [login.php] as Login
    [index.php] as Dashboard
    [estudiantes.php] as Estudiantes
    [profesores.php] as Profesores
    [notas.php] as Notas
    [llamados.php] as Llamados
    [horarios.php] as Horarios
    [cursos.php] as Cursos
    [materias.php] as Materias
}

package "Capa de Lógica de Negocio" {
    [includes/auth.php] as Auth
    [includes/header.php] as Header
    [includes/footer.php] as Footer
}

package "Capa de Datos" {
    [config/database.php] as Database
    [database/sistema_admin_eest2.sql] as Schema
}

package "Base de Datos" {
    database "MySQL" {
        [estudiantes] as TEstudiantes
        [profesores] as TProfesores
        [notas] as TNotas
        [llamados_atencion] as TLlamados
        [cursos] as TCursos
        [materias] as TMaterias
        [usuarios] as TUsuarios
    }
}

' Conexiones actuales (acoplamiento alto)
Login --> Auth
Dashboard --> Database
Estudiantes --> Database
Profesores --> Database
Notas --> Database
Llamados --> Database
Horarios --> Database
Cursos --> Database
Materias --> Database

Auth --> Database
Database --> TEstudiantes
Database --> TProfesores
Database --> TNotas
Database --> TLlamados
Database --> TCursos
Database --> TMaterias
Database --> TUsuarios

' Problemas identificados
note right of Estudiantes : "Acceso directo a BD\nViolación de separación\n de responsabilidades"
note right of Notas : "Lógica de negocio\nmezclada con presentación"
note right of Database : "Singleton básico\nSin abstracción de persistencia"

@enduml
